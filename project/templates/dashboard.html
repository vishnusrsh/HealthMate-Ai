{% extends 'base.html' %}
{% block title %}Dashboard - HealthMate AI{% endblock %}
{% block content %}
<!-- Welcome Message -->
<div class="container-fluid mb-4 px-0">
  <div class="row justify-content-center mx-0">
    <div class="col-lg-10 px-0">
      <div class="welcome-card card border-0 shadow-lg text-center py-4 mb-4 bg-white text-dark fade-in-up w-100 position-relative" style="overflow: hidden; min-height: 260px;">
        <img src="{{ url_for('static', filename='images/welcome-bg.jpg') }}" alt="Welcome Illustration" class="position-absolute top-0 start-0 w-100 h-100" style="object-fit: cover; z-index: 1;">
        <div class="card-body px-2 px-md-5 position-relative" style="z-index: 3;">
          <h2 class="display-5 fw-bold mb-2 text-white">Welcome, <span class="text-white">{{ user.username }}</span>!</h2>
          <p class="lead mb-1 text-white">Your personalized health dashboard is ready.</p>
          <p class="mb-0 fs-5 text-white">We're excited to help you achieve your wellness goals. Explore your dashboard to access all your health tools and insights!</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Motivational Tip Carousel -->
<div class="container mb-4">
  <h4 class="fw-bold mb-3 text-dark">Motivational Tips</h4>
  <div id="motivationCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="2000">
    <div class="carousel-inner">
      {% set quotes = [
        "Health is a state of body. Wellness is a state of being. — J. Stanford",
        "Take care of your body. It's the only place you have to live. — Jim Rohn",
        "A healthy outside starts from the inside. — Robert Urich",
        "The greatest wealth is health. — Virgil",
        "To keep the body in good health is a duty. — Buddha",
        "It is health that is real wealth and not pieces of gold and silver. — Mahatma Gandhi",
        "Those who think they have no time for healthy eating will sooner or later have to find time for illness. — Edward Stanley",
        "Your body hears everything your mind says. — Naomi Judd",
        "The groundwork for all happiness is good health. — Leigh Hunt",
        "A fit body, a calm mind, a house full of love. These things cannot be bought. — Naval Ravikant",
        "Happiness is the highest form of health. — Dalai Lama",
        "He who has health has hope; and he who has hope has everything. — Arabian Proverb",
        "If you don't make time for your wellness, you will be forced to make time for your illness. — Unknown",
        "The first wealth is health. — Ralph Waldo Emerson",
        "Good health is not something we can buy. However, it can be an extremely valuable savings account. — Anne Wilson Schaef",
        "A healthy attitude is contagious but don't wait to catch it from others. Be a carrier. — Tom Stoppard",
        "The human body is the best picture of the human soul. — Ludwig Wittgenstein",
        "It's never too early or too late to work towards being the healthiest you. — Unknown",
        "Health is not valued till sickness comes. — Thomas Fuller",
        "The mind and body are not separate. what affects one, affects the other. — Anonymous",
        "Eat to live, not live to eat. — Socrates",
        "The doctor of the future will give no medicine but will interest his patients in the care of the human frame, in diet and in the cause and prevention of disease. — Thomas Edison",
        "Wellness encompasses a healthy body, a sound mind, and a tranquil spirit. Enjoy the journey as you strive for wellness. — Laurette Gagnon Beaulieu",
        "A good laugh and a long sleep are the best cures in the doctor's book. — Irish Proverb",
        "The best and most efficient pharmacy is within your own system. — Robert C. Peale",
        "If you achieve all your goals but lose your health, you have achieved nothing. — S. N. Goenka",
        "Your health account, your bank account, they're the same thing. The more you put in, the more you can take out. — Jack LaLanne",
        "The secret of getting ahead is getting started. — Mark Twain",
        "You can't enjoy wealth if you're not in good health. — Anonymous",
        "Take care of your body. It's the only place you have to live. — Jim Rohn",
        "A healthy outside starts from the inside. — Robert Urich",
        "The greatest wealth is health. — Virgil",
        "To keep the body in good health is a duty. — Buddha",
        "It is health that is real wealth and not pieces of gold and silver. — Mahatma Gandhi",
        "Those who think they have no time for healthy eating will sooner or later have to find time for illness. — Edward Stanley",
        "Your body hears everything your mind says. — Naomi Judd",
        "The groundwork for all happiness is good health. — Leigh Hunt",
        "A fit body, a calm mind, a house full of love. These things cannot be bought. — Naval Ravikant",
        "Happiness is the highest form of health. — Dalai Lama",
        "He who has health has hope; and he who has hope has everything. — Arabian Proverb",
        "If you don't make time for your wellness, you will be forced to make time for your illness. — Unknown",
        "The first wealth is health. — Ralph Waldo Emerson",
        "Good health is not something we can buy. However, it can be an extremely valuable savings account. — Anne Wilson Schaef",
        "A healthy attitude is contagious but don't wait to catch it from others. Be a carrier. — Tom Stoppard",
        "The human body is the best picture of the human soul. — Ludwig Wittgenstein",
        "It's never too early or too late to work towards being the healthiest you. — Unknown",
        "Health is not valued till sickness comes. — Thomas Fuller",
        "The mind and body are not separate. what affects one, affects the other. — Anonymous"
      ] %}
      {% for quote in quotes %}
      <div class="carousel-item {% if loop.first %}active{% endif %}">
        <div class="card info-card border-0 shadow-sm text-center fade-in-up bg-white text-dark">
          <div class="card-body d-flex align-items-center justify-content-center" style="min-height: 120px;">
            <i class="bi bi-quote display-5 text-primary me-3"></i>
            <div>
              <span class="fw-semibold text-dark">{{ quote.split('—')[0].strip() }}</span>
              <div class="small mt-1 text-secondary">— {{ quote.split('—')[1].strip() if '—' in quote else '' }}</div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<!-- Our Services Section -->
<div class="container mb-5 bg-light rounded-4 py-4">
  <h4 class="fw-bold mb-3 text-dark">Our Services</h4>
  <p class="mb-4 text-secondary">Explore the powerful tools and services HealthMate AI offers to support your wellness journey.</p>
  <div class="row g-4 mb-4">
    <div class="col-md-4">
      <div class="dashboard-card card h-100 border-0 shadow-sm fade-in-up bg-white text-dark">
        <div class="card-body text-center">
          <div class="stat-icon mb-3"><i class="bi bi-chat-dots-fill display-5 text-primary"></i></div>
          <h5 class="card-title fw-bold text-dark">AI Health Chatbot</h5>
          <p class="card-text small text-secondary" style="font-size: 1rem;">Ask health-related questions and get instant answers.</p>
          <a href="{{ url_for('routes.chatbot') }}" class="btn btn-primary btn-sm" style="padding: 0.25rem 0.75rem; font-size: 0.9rem;">Start Chat</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="dashboard-card card h-100 border-0 shadow-sm fade-in-up bg-white text-dark">
        <div class="card-body text-center">
          <div class="stat-icon mb-3"><i class="bi bi-capsule-pill display-5 text-primary"></i></div>
          <h5 class="card-title fw-bold text-dark">Pill Reminder</h5>
          <p class="card-text small text-secondary" style="font-size: 1rem;">Never miss a dose and manage your schedule with ease.</p>
          <a href="{{ url_for('routes.pill_reminders') }}" class="btn btn-primary btn-sm" style="padding: 0.25rem 0.75rem; font-size: 0.9rem;">Manage Reminders</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="dashboard-card card h-100 border-0 shadow-sm fade-in-up bg-white text-dark">
        <div class="card-body text-center">
          <div class="stat-icon mb-3"><i class="bi bi-droplet display-5 text-primary"></i></div>
          <h5 class="card-title fw-bold text-dark">Blood Donor</h5>
          <p class="card-text small text-secondary" style="font-size: 1rem;">Register as a blood donor or view active donors.</p>
          <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
            <a href="{{ url_for('routes.blood_donor_registration') }}" class="btn btn-primary btn-sm mb-2 mb-sm-0" style="padding: 0.25rem 0.75rem; font-size: 0.9rem;">Register as Donor</a>
            <a href="{{ url_for('routes.active_blood_donors') }}" class="btn btn-primary btn-sm" style="padding: 0.25rem 0.75rem; font-size: 0.9rem;">View Active Donors</a>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="dashboard-card card h-100 border-0 shadow-sm fade-in-up bg-white text-dark">
        <div class="card-body text-center">
          <div class="stat-icon mb-3"><i class="bi bi-body-text display-5 text-primary"></i></div>
          <h5 class="card-title fw-bold text-dark">Body Map Symptom Checker</h5>
          <p class="card-text small text-secondary" style="font-size: 1rem;">Click on body parts to select and analyze symptoms visually.</p>
          <a href="{{ url_for('routes.body_map') }}" class="btn btn-primary btn-sm" style="padding: 0.25rem 0.75rem; font-size: 0.9rem;">Use Body Map</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="dashboard-card card h-100 border-0 shadow-sm fade-in-up bg-white text-dark">
        <div class="card-body text-center">
          <div class="stat-icon mb-3"><i class="bi bi-calculator display-5 text-primary"></i></div>
          <h5 class="card-title fw-bold text-dark">BMI Calculator</h5>
          <p class="card-text small text-secondary" style="font-size: 1rem;">Calculate your BMI and get health advice.</p>
          <a href="{{ url_for('routes.bmi_calculator') }}" class="btn btn-primary btn-sm" style="padding: 0.25rem 0.75rem; font-size: 0.9rem;">Calculate BMI</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="dashboard-card card h-100 border-0 shadow-sm fade-in-up bg-white text-dark">
        <div class="card-body text-center">
          <div class="stat-icon mb-3"><i class="bi bi-lightbulb display-5 text-primary"></i></div>
          <h5 class="card-title fw-bold text-dark">Health Tips</h5>
          <p class="card-text small text-secondary" style="font-size: 1rem;">Get daily health tips and recommendations.</p>
          <a href="{{ url_for('routes.health_tips') }}" class="btn btn-primary btn-sm" style="padding: 0.25rem 0.75rem; font-size: 0.9rem;">Get a Tip</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Health Challenges Section -->
<div class="container mb-5">
<div class="row">
  <div class="col-12">
    <div class="card border-0 shadow-sm fade-in-up">
      <div class="card-header bg-white text-dark">
        <h5 class="mb-0">
          <i class="bi bi-trophy-fill me-2 text-warning"></i>
          Health Challenges
        </h5>
      </div>
      <div class="card-body">
        {% if active_challenges %}
          <div class="row">
            <div class="col-md-8">
              <h6 class="fw-bold text-primary mb-3">Active Challenges</h6>
              {% for user_challenge in active_challenges[:2] %}
              <div class="challenge-item mb-3 p-3 border rounded">
                <div class="d-flex align-items-center mb-2">
                  <i class="bi {{ user_challenge.challenge.icon }} text-{{ user_challenge.challenge.color }} me-2"></i>
                  <h6 class="mb-0">{{ user_challenge.challenge.name }}</h6>
                </div>
                <div class="progress mb-2" style="height: 6px;">
                  {% set progress_percent = (user_challenge.total_completed_days / user_challenge.challenge.duration_days * 100) | round %}
                  <div class="progress-bar bg-{{ user_challenge.challenge.color }}" 
                       style="width: {{ progress_percent }}%"></div>
                </div>
                <div class="d-flex justify-content-between small text-muted">
                  <span>{{ user_challenge.total_completed_days }}/{{ user_challenge.challenge.duration_days }} days</span>
                  <span>Streak: {{ user_challenge.current_streak }}</span>
                </div>
              </div>
              {% endfor %}
              {% if active_challenges|length > 2 %}
              <div class="text-center">
                <small class="text-muted">+{{ active_challenges|length - 2 }} more challenges</small>
              </div>
              {% endif %}
            </div>
            <div class="col-md-4 d-flex align-items-center justify-content-center">
              <div class="text-center">
                <a href="{{ url_for('routes.health_challenges') }}" class="btn btn-outline-primary btn-lg">
                  <i class="bi bi-plus-circle me-2"></i>
                  View All Challenges
                </a>
              </div>
            </div>
          </div>
        {% else %}
          <div class="text-center py-4">
            <i class="bi bi-trophy display-4 text-muted mb-3"></i>
            <p class="text-muted mb-3">No active challenges yet. Start your health journey today!</p>
            <a href="{{ url_for('routes.health_challenges') }}" class="btn btn-outline-primary btn-lg">
              <i class="bi bi-plus-circle me-2"></i>
              Join Challenges
            </a>
          </div>
        {% endif %}
          </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}